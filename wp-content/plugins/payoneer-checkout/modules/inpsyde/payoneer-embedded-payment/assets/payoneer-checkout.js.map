{"version":3,"file":"payoneer-checkout.js","mappings":"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","sources":["webpack://payoneer-embedded-payment/./node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://payoneer-embedded-payment/external window \"React\"","webpack://payoneer-embedded-payment/./node_modules/react/jsx-runtime.js","webpack://payoneer-embedded-payment/webpack/bootstrap","webpack://payoneer-embedded-payment/webpack/runtime/compat get default export","webpack://payoneer-embedded-payment/webpack/runtime/define property getters","webpack://payoneer-embedded-payment/webpack/runtime/hasOwnProperty shorthand","webpack://payoneer-embedded-payment/webpack/runtime/make namespace object","webpack://payoneer-embedded-payment/external window \"jQuery\"","webpack://payoneer-embedded-payment/./resources/js/src/util/woocommerce.js","webpack://payoneer-embedded-payment/external window [\"wp\",\"data\"]","webpack://payoneer-embedded-payment/./resources/js/src/store/constants.js","webpack://payoneer-embedded-payment/./resources/js/src/store/reducer.js","webpack://payoneer-embedded-payment/./resources/js/src/util/components.js","webpack://payoneer-embedded-payment/external window [\"wp\",\"hooks\"]","webpack://payoneer-embedded-payment/./resources/js/src/store/actions.js","webpack://payoneer-embedded-payment/./resources/js/src/util/sdk/umdLoader.js","webpack://payoneer-embedded-payment/external window [\"wp\",\"apiFetch\"]","webpack://payoneer-embedded-payment/./resources/js/src/store/resolvers.js","webpack://payoneer-embedded-payment/./resources/js/src/store/index.js","webpack://payoneer-embedded-payment/./resources/js/src/store/selectors.js","webpack://payoneer-embedded-payment/./resources/js/src/util/http.js","webpack://payoneer-embedded-payment/external window [\"wc\",\"wcBlocksData\"]","webpack://payoneer-embedded-payment/./resources/js/src/store/storeListeners.js","webpack://payoneer-embedded-payment/./resources/js/src/components/widgetContainer/component.js","webpack://payoneer-embedded-payment/./resources/js/src/components/widgetContainer/provider.js","webpack://payoneer-embedded-payment/./resources/js/src/components/widgetContainer/index.js","webpack://payoneer-embedded-payment/./resources/js/src/util/checkout/blockCheckout.js","webpack://payoneer-embedded-payment/./resources/js/payoneer-checkout.js","webpack://payoneer-embedded-payment/./resources/js/src/util/checkout/paymentCheckout.js","webpack://payoneer-embedded-payment/./resources/js/src/util/checkout/classicCheckout.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","module.exports = window[\"React\"];","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","import $ from 'jquery';\nconst {\n\tpaymentFieldsComponentAttribute\n} = window.PayoneerData;\n\nexport const paymentMethodName = () => {\n\treturn document.querySelector( '.woocommerce-checkout input[name=\"payment_method\"]:checked' ).value\n}\n\nexport const selectedPaymentGatewayId = () => {\n\treturn document.querySelector(\n\t\t'.woocommerce-checkout input[name=\"payment_method\"]:checked'\n\t)?.id;\n};\n\nexport const getComponentNameFromPaymentBox = function ( paymentBox ) {\n\treturn paymentBox\n\t\t?.querySelector( `[${ paymentFieldsComponentAttribute }]` )\n\t\t?.getAttribute( paymentFieldsComponentAttribute );\n};\n\nexport const isPayoneerGateway = ( gatewayId ) => {\n\treturn /^payment_method_payoneer-(checkout|afterpay)/i.test( gatewayId );\n};\n\nexport const isPayoneerGatewaySelected = () =>\n\tisPayoneerGateway( selectedPaymentGatewayId() );\n\nexport const isPayForOrder = () => {\n\treturn window.PayoneerData.isPayForOrder === '1';\n};\n\nexport const getPaymentBox = ( gatewayId ) => {\n\tconst selector = '.payment_box.' + gatewayId;\n\treturn document.querySelector( selector );\n};\n\nexport const getSelectedPaymentBox = () =>\n\tgetPaymentBox( selectedPaymentGatewayId() );\n\nconst hostedOverrideFlagInput = () => {\n\tconst { hostedFlowOverrideFlag } = window.PayoneerData;\n\treturn document.querySelector(\n\t\t`input[name=\"${ hostedFlowOverrideFlag }\"]`\n\t);\n};\n\nexport const submitOrderPayViaAjax = ( $form ) => {\n\t//Blocks the UI in the same way Woocommerce does (source: https://github.com/woocommerce/woocommerce/blob/6.0.1/plugins/woocommerce/assets/js/frontend/checkout.js#L454-L466)\n\t$form.block( {\n\t\tmessage: null,\n\t\toverlayCSS: {\n\t\t\tbackground: '#fff',\n\t\t\topacity: 0.6,\n\t\t},\n\t} );\n\n\treturn $.ajax( {\n\t\ttype: 'POST',\n\t\turl: window.wc_checkout_params.ajax_url,\n\t\txhrFields: {\n\t\t\t// This is important. We need the session cookie to access the LIST in the back-end\n\t\t\twithCredentials: true,\n\t\t},\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\taction: 'payoneer_order_pay',\n\t\t\tfields: $form.serialize(),\n\t\t\tparams: new URL( document.location ).searchParams.toString(),\n\t\t},\n\t} ).always( () => $form.unblock() );\n};\n\nexport const isBlockCheckout = () =>\n\twindow?.PayoneerData?.isBlockCheckout === '1';\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","export const ACTIONS = {\n\tSET_EXTENSION_DATA: 'SET_EXTENSION_DATA',\n\tSET_LONG_ID: 'SET_LONG_ID',\n\tSET_LIST_URL: 'SET_LIST_URL',\n\tSET_ENV: 'SET_ENV',\n\tSET_SDK: 'SET_SDK',\n\tSET_SDK_VERSION: 'SET_SDK_VERSION',\n\tSET_SDK_INTEGRITY: 'SET_SDK_INTEGRITY',\n\tSET_SDK_STATE: 'SET_SDK_STATE',\n\tADD_COMPONENT: 'ADD_COMPONENT',\n\tREMOVE_COMPONENT: 'REMOVE_COMPONENT',\n\tMOUNT_COMPONENTS: 'MOUNT_COMPONENTS',\n\tPAY: 'PAY',\n\tSET_ACTIVE_PAYMENT_METHOD: 'SET_ACTIVE_PAYMENT_METHOD',\n\tSET_FORCE_HOSTED_FLOW: 'SET_FORCE_HOSTED_FLOW',\n\tSET_IS_VALID: 'SET_IS_VALID'\n};\n","import { ACTIONS } from './constants';\n\nconst initialState = {\n\tactivePaymentMethod: '',\n\tlongId: null,\n\tenv: null,\n\tsdkState: 'UNINITIALIZED',\n\tforceHostedFlow: true,\n\tisValid: false,\n\tavailableDropInComponents: []\n};\n\nconst reducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase ACTIONS.SET_EXTENSION_DATA:\n\t\t\treturn { ...state, extension: action.payload };\n\t\tcase ACTIONS.SET_LONG_ID:\n\t\t\treturn { ...state, longId: action.payload };\n\t\tcase ACTIONS.SET_LIST_URL:\n\t\t\treturn { ...state, listUrl: action.payload };\n\t\tcase ACTIONS.SET_ENV:\n\t\t\treturn { ...state, env: action.payload };\n\t\tcase ACTIONS.SET_SDK:\n\t\t\treturn { ...state, sdk: action.payload };\n\t\tcase ACTIONS.SET_SDK_VERSION:\n\t\t\treturn { ...state, sdkVersion: action.payload };\n\t\tcase ACTIONS.SET_SDK_INTEGRITY:\n\t\t\treturn { ...state, sdkIntegrity: action.payload };\n\t\tcase ACTIONS.SET_SDK_STATE:\n\t\t\treturn { ...state, sdkState: action.payload };\n\t\tcase ACTIONS.SET_ACTIVE_PAYMENT_METHOD:\n\t\t\treturn { ...state, activePaymentMethod: action.payload };\n\t\tcase ACTIONS.SET_FORCE_HOSTED_FLOW:\n\t\t\treturn { ...state, forceHostedFlow: action.payload };\n\t\tcase ACTIONS.SET_IS_VALID:\n\t\t\treturn { ...state, isValid: action.payload };\n\t\tcase ACTIONS.ADD_COMPONENT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tavailableDropInComponents: {\n\t\t\t\t\t...state.availableDropInComponents,\n\t\t\t\t\t[action.payload.name]: action.payload.component\n\t\t\t\t}\n\t\t\t};\n\t\tcase ACTIONS.REMOVE_COMPONENT:\n\t\t\tlet availableDropInComponents = { ...state.availableDropInComponents };\n\t\t\tdelete availableDropInComponents[action.payload.name];\n\t\t\treturn { ...state, availableDropInComponents };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default reducer;\n","import {\n\tgetPaymentBox,\n\tgetComponentNameFromPaymentBox,\n\tsetHostedOverride\n} from './woocommerce';\n\nexport const getComponentNameByGatewayId = ( gatewayId ) => {\n\tconst gatewayIdToComponentName = {\n\t\t'payoneer-checkout': 'cards',\n\t\t'payoneer-afterpay': 'afterpay',\n\t};\n\n\treturn gatewayIdToComponentName[ gatewayId ];\n}\n\nconst { paymentFieldsComponentAttribute } = window.PayoneerData;\n\nexport const mountComponents = ( components, sdk ) => {\n\tfor ( const [ componentName, component ] of Object.entries( components ) ) {\n\t\tconst container = findComponentContainer( componentName );\n\t\tif (\n\t\t\tcontainer instanceof Element &&\n\t\t\tsdk.isAvailable( componentName )\n\t\t) {\n\t\t\tcomponent.mount( container );\n\t\t}\n\t}\n};\n\nexport const findComponentContainer = function ( componentName ) {\n\treturn document.querySelector(\n\t\t`[${paymentFieldsComponentAttribute}=${componentName}]`\n\t);\n};\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","import {\n\tmountComponents as doMountComponents,\n\tgetComponentNameByGatewayId,\n\tfindComponentContainer\n} from '../util/components';\nimport { ACTIONS } from './constants';\nimport { defaultHooks } from \"@wordpress/hooks\";\n\nexport const setLongId = ( longId ) => async ( { select, resolveSelect, dispatch } ) => {\n\tconst sdk = await resolveSelect.getSdk()\n\tawait sdk.updateLongId( longId );\n\tdispatch( { type: ACTIONS.SET_LONG_ID, payload: longId } );\n}\n\nexport const setSdkState = ( sdkState ) => {\n\treturn { type: ACTIONS.SET_SDK_STATE, payload: sdkState };\n};\n\nexport function setEnv( env ) {\n\treturn { type: ACTIONS.SET_ENV, payload: env };\n}\n\nexport const addComponent = ( componentName ) => async ( { select, resolveSelect, dispatch } ) => {\n\tconst sdk = await resolveSelect.getSdk()\n\tconsole.log( sdk )\n\tif ( !sdk.isDroppedIn( componentName ) && typeof findComponentContainer( componentName ) === 'object' ) {\n\t\ttry {\n\t\t\tconst payload = {\n\t\t\t\tname: componentName,\n\t\t\t\tcomponent: sdk.dropIn( componentName, {\n\t\t\t\t\thidePaymentButton: true,\n\t\t\t\t} )\n\t\t\t};\n\t\t\tconsole.log( 'New component', payload );\n\t\t\tdispatch( { type: ACTIONS.ADD_COMPONENT, payload } );\n\t\t\tdoMountComponents( { [ payload.name ]: payload.component }, sdk );\n\t\t} catch ( e ) {\n\t\t\tconsole.error( `Failed to drop in component ${componentName}. Error details: ${e}` );\n\t\t}\n\t}\n}\n\nexport function removeComponent( componentName ) {\n\treturn { type: ACTIONS.REMOVE_COMPONENT, payload: componentName };\n}\n\n/**\n * When a React component is displayed for the first time, the SDK needs to mount its dropIn.\n * So they call this function in a useEffect callback.\n * However:\n * If the SDK has been bootstrapped already, and a new method becomes available after\n * checkout field changes we need to instruct the SDK to refetch the list of dropIn components.\n * This is why we call sdk.updateLongId()\n * After that, the onComponentListChange handler should take care of mounting automatically\n *\n * @returns {(function({select: *, resolveSelect: *, dispatch: *}): Promise<void>)|*}\n */\nexport const initPayoneerComponents = () => async ( { select, resolveSelect, dispatch } ) => {\n\tconst sdk = await resolveSelect.getSdk()\n\tconst longId = await resolveSelect.getLongId()\n\tawait sdk.updateLongId( longId );\n\tawait dispatch.mountComponents()\n}\n\nexport const reboot = () => async ( { select, resolveSelect, dispatch } ) => {\n\tdefaultHooks.doAction( 'payoneer.webSdk.reboot' )\n\twp.data.dispatch( 'wc/store/cart' ).invalidateResolutionForStore();\n\tdispatch.invalidateResolutionForStore()\n\tawait dispatch.mountComponents()\n}\n\nexport const mountComponents = () => async ( { select, resolveSelect, dispatch } ) => {\n\tconst sdk = await resolveSelect.getSdk()\n\tconst availableComponents = select.getAvailableDropInComponents();\n\tconsole.log( 'Mounting components', availableComponents );\n\tdoMountComponents( availableComponents, sdk );\n};\n\nexport const pay = () => ( { select, dispatch } ) => {\n\tconst availableComponents = select.getAvailableDropInComponents();\n\tconst activePaymentMethod = select.getActivePaymentMethod();\n\tconst componentName = getComponentNameByGatewayId( activePaymentMethod );\n\tconst component = availableComponents[ componentName ];\n\tif ( !component ) {\n\t\tconsole.log( 'Component not found.' );\n\t\treturn;\n\t}\n\tcomponent.pay();\n};\n\nexport const onBeforeError = ( sdk, component, data ) => async ( { select, dispatch } ) => {\n\tdispatch.setSdkState( sdk.state );\n\tconsole.error( \"WebSDK error:\", { sdk, component, data } );\n\t/**\n\t * For SYSTEM_FAILURE, we assume there is nothing we can do to recover.\n\t * Use hosted mode fallback and let the customer proceed\n\t */\n\tif ( [ \"SYSTEM_FAILURE\" ].includes( data?.interaction?.reason ) ) {\n\t\tdispatch.setForceHostedFlow( true );\n\t\treturn true;\n\t}\n\t/**\n\t * Let the outside world attempt to handle the error.\n\t * The different checkout types can reboot the payment attempt from there.\n\t */\n\treturn defaultHooks.applyFilters( 'payoneer.webSdk.onSdkError', false, sdk, component, data );\n}\n\nexport const onPaymentDeclined = ( sdk, component, data ) => async ( { select, dispatch } ) => {\n\treturn defaultHooks.applyFilters( 'payoneer.webSdk.onPaymentDeclined', true, sdk, component, data )\n}\n\nexport const onComponentListChange = ( sdk, changeInfo ) => async ( { select, dispatch } ) => {\n\tconsole.log( 'onComponentListChange', sdk, changeInfo );\n\tchangeInfo.addedComponents.forEach( ( name ) => {\n\t\tdispatch.addComponent( name );\n\t} );\n\tchangeInfo.removedComponents.forEach( ( name ) => {\n\t\tdispatch.removeComponent( name );\n\t} );\n}\nexport const onValidationInfo = ( sdk, componentName, data ) => async ( { select, dispatch } ) => {\n\tconsole.log(componentName,data)\n\tdispatch.setIsValid( data.valid )\n}\n\nexport const setActivePaymentMethod = ( method ) => async ( { dispatch } ) => {\n\tconsole.log( 'Setting active payment method', method );\n\tdispatch.mountComponents()\n\tdispatch( { type: ACTIONS.SET_ACTIVE_PAYMENT_METHOD, payload: method } );\n}\n\nexport function setForceHostedFlow( state ) {\n\tconsole.log( 'Setting hosted flow override flag', state );\n\treturn { type: ACTIONS.SET_FORCE_HOSTED_FLOW, payload: state };\n}\n\nexport function setIsValid( flag ) {\n\treturn { type: ACTIONS.SET_IS_VALID, payload: flag };\n}\n","/*\n * Since the WebSDK is not yet available on npm, we asynchronously\n * load the UMD version from the appropriate env whenever the SDK is initialized\n * for the first time.\n */\n\nconst formatUmdUrl = ( env, sdkVersion ) => {\n\t/**\n\t * When the configuration does not provide a pinned version we can ommit the script version to\n\t * load the latest version of the SDK.\n\t *\n\t * @type {string}\n\t */\n\tconst scriptVersion = sdkVersion ? `-${sdkVersion}` : '';\n\n\treturn new URL(\n\t\twindow.PayoneerData.webSdkUmdUrlTemplate\n\t\t\t?.replace( '<env>', env )\n\t\t\t?.replace( '<version>', scriptVersion )\n\t);\n};\n\nconst sdkLoader = ( config ) => {\n\tif ( window.Payoneer?.CheckoutWeb ) {\n\t\treturn window.Payoneer.CheckoutWeb( config );\n\t}\n\n\treturn new Promise( ( resolve, reject ) => {\n\t\tconst script = document.createElement( 'script' );\n\t\tscript.src = formatUmdUrl( config.env, config.sdkVersion );\n\t\tscript.onload = resolve;\n\t\tscript.onerror = reject;\n\n\t\t/**\n\t\t * Add Subresource Integrity (SRI) validation when a specific SDK version is requested.\n\t\t * This enhances security by ensuring the loaded script matches its expected content,\n\t\t * which is a requirement for PCI compliance.\n\t\t */\n\t\tif ( config.sdkVersion && config.sdkIntegrity ) {\n\t\t\tscript.integrity = config.sdkIntegrity;\n\n\t\t\t// Add crossorigin attribute when using integrity checks.\n\t\t\t// This is required for SRI to work properly with CORS.\n\t\t\tscript.crossOrigin = 'anonymous';\n\t\t}\n\t\tdocument.head.appendChild( script );\n\t} ).then( () => {\n\t\treturn window.Payoneer.CheckoutWeb( config );\n\t} );\n};\n\nexport default sdkLoader;\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","import { ACTIONS } from \"./constants\";\nimport initializeSdk from \"../util/sdk/umdLoader\";\nimport apiFetch from '@wordpress/api-fetch';\nimport { defaultHooks } from \"@wordpress/hooks\";\n\nconst {\n\twebsdkStyles: styles\n} = PayoneerData;\n\nexport const getSdk = () => async ( { resolveSelect, dispatch } ) => {\n\tconst env = await resolveSelect.getEnv();\n\tconst sdkVersion = await resolveSelect.getSdkVersion();\n\tconst sdkIntegrity = await resolveSelect.getSdkIntegrity();\n\tconst longId = await resolveSelect.getLongId();\n\tconst onBeforeError = async ( sdk, component, data ) => await dispatch.onBeforeError( sdk, component, data );\n\tconst onPaymentDeclined = async ( sdk, component, data ) => await dispatch.onPaymentDeclined( sdk, component, data );\n\tconst onComponentListChange = async ( sdk, changeInfo ) => await dispatch.onComponentListChange( sdk, changeInfo );\n\tconst onValidationInfo = async ( sdk, componentName, data ) => await dispatch.onValidationInfo( sdk, componentName, data );\n\n\tconst sdk = await initializeSdk( {\n\t\tenv,\n\t\tsdkVersion,\n\t\tsdkIntegrity,\n\t\tonBeforeError,\n\t\tonPaymentDeclined,\n\t\tonComponentListChange,\n\t\tonValidationInfo,\n\t\tpreload: [ 'cards' ],\n\t\tstyles\n\t} );\n\n\tif ( sdk.state === 'LOADING' ) {\n\t\tconst nonLoadingState = async () => {\n\t\t\treturn await new Promise( resolve => {\n\t\t\t\tconst interval = setInterval( () => {\n\t\t\t\t\tif ( sdk.state !== 'LOADING' ) {\n\t\t\t\t\t\tresolve( sdk.state );\n\t\t\t\t\t\tclearInterval( interval );\n\t\t\t\t\t}\n\t\t\t\t}, 1000 );\n\t\t\t} );\n\t\t};\n\t\tawait nonLoadingState();\n\t}\n\tawait sdk.updateLongId( longId );\n\tawait dispatch.setForceHostedFlow( false );\n\tawait dispatch.setSdkState( sdk.state );\n\tawait dispatch( { type: ACTIONS.SET_SDK, payload: sdk } );\n}\n/**\n * Perform a Store API call to the cart endpoint where we provide LIST longId and environment\n */\nexport const getExtensionData = () => async ( { dispatch } ) => {\n\n\tconst response = await apiFetch( {\n\t\t/**\n\t\t * /wc/store/v1/cart\n\t\t * is pre-warmed in PHP, so the first API call will always get data produced during\n\t\t * the initial page load.\n\t\t * Here we MUST receive the results of an actual API call.\n\t\t * So we use a custom URL hash to prevent this from happening.\n\t\t */\n\t\tpath: '/wc/store/v1/cart#skipPreloadingMiddleware',\n\t\tmethod: 'GET',\n\t\tcache: 'no-store',\n\t\tparse: false,\n\t} );\n\tconst json = await response.json();\n\tconst payoneerExtensionData = json.extensions[ 'payoneer-checkout' ];\n\tconsole.log('Payoneer Extension Data: ', payoneerExtensionData);\n\tawait dispatch( { type: ACTIONS.SET_EXTENSION_DATA, payload: payoneerExtensionData } );\n\tdefaultHooks.doAction( 'payoneer.checkout.onReceiveExtensionData', payoneerExtensionData )\n}\nexport const getLongId = () => async ( { resolveSelect,dispatch } ) => {\n\tconst extensionData = await resolveSelect.getExtensionData();\n\tawait dispatch( { type: ACTIONS.SET_LONG_ID, payload: extensionData.longId } );\n}\n\nexport const getEnv = () => async ( { resolveSelect,dispatch } ) => {\n\tconst extensionData = await resolveSelect.getExtensionData();\n\tawait dispatch( { type: ACTIONS.SET_ENV, payload: extensionData.environment } );\n}\n\nexport const getSdkVersion = () => async ( { resolveSelect,dispatch } ) => {\n\tconst extensionData = await resolveSelect.getExtensionData();\n\tawait dispatch( { type: ACTIONS.SET_SDK_VERSION, payload: extensionData.sdkVersion } );\n}\n\nexport const getSdkIntegrity = () => async ( { resolveSelect,dispatch } ) => {\n\tconst extensionData = await resolveSelect.getExtensionData();\n\tawait dispatch( { type: ACTIONS.SET_SDK_INTEGRITY, payload: extensionData.sdkIntegrity } );\n}\n","import { createReduxStore, register } from '@wordpress/data';\nimport reducer from './reducer';\nimport * as actions from './actions';\nimport * as resolvers from './resolvers';\nimport selectors from './selectors';\n\nexport const PAYONEER_STORE_KEY = 'payoneer-checkout';\n\nexport const payoneerStore = createReduxStore(PAYONEER_STORE_KEY, {\n\treducer,\n\tactions,\n\tselectors,\n\tresolvers\n});\n\nregister(payoneerStore);\n\n","\nconst selectors = {\n\t/**\n\t * This is technically only needed temporarily to lazy-fetch longId and env\n\t * in a resolver. Maybe there are better ways to deal with this?\n\t */\n\tgetExtensionData: (state) => state.extension,\n\tgetLongId: (state) => state.longId,\n\tgetEnv: (state) => state.env,\n\tgetSdkVersion: (state) => state.sdkVersion,\n\tgetSdkIntegrity: (state) => state.sdkIntegrity,\n\tgetSdk: (state) => state.sdk,\n\tisHostedModeForced: (state) => state.forceHostedFlow,\n\t/**\n\t * Validity only makes sense for Cards payment method\n\t * https://checkoutdocs.payoneer.com/docs/payment-button#listening-for-validation-events\n\t */\n\tgetIsValid: (state) =>\n\t\tstate.activePaymentMethod !== 'payoneer-checkout' ||\n\t\tstate.isValid,\n\tgetActivePaymentMethod: (state) => state.activePaymentMethod,\n\tgetAvailableDropInComponents: (state) => state.availableDropInComponents\n};\n\nexport default selectors;\n","import { PAYONEER_STORE_KEY } from \"../store/index\";\nimport { select } from '@wordpress/data';\nimport { isPayForOrder } from \"./woocommerce\";\nimport { defaultHooks } from \"@wordpress/hooks\";\n\nconst FORCE_HOSTED_MODE_HEADER = 'x-payoneer-checkout-force-hosted-flow'\nconst LIST_LONG_ID = 'x-payoneer-long-id'\nconst IS_PAYMENT_CHECKOUT = 'x-payoneer-is-payment-checkout'\n\nconst paymentCheckoutHeaderValue = () => {\n\tif ( !isPayForOrder ) {\n\t\treturn '' // to avoid receiving random variables from non-payment pages\n\t}\n\tconst urlParams = new URLSearchParams( window.location.search );\n\treturn urlParams.get( 'key' ) || '';\n};\n\nconst getCustomHeaders = () => {\n\tconst customHeaders = {\n\t\t[ FORCE_HOSTED_MODE_HEADER ]: String( select( PAYONEER_STORE_KEY ).isHostedModeForced() ),\n\t\t[ IS_PAYMENT_CHECKOUT ]: paymentCheckoutHeaderValue()\n\t};\n\treturn defaultHooks.applyFilters( 'payoneer.http.customHeaders', customHeaders );\n};\n\n/**\n * Since we need the getLongId resolver to have run once, we defer adding the header\n */\ndefaultHooks.addAction(\n\t'payoneer.checkout.onReceiveExtensionData',\n\t'payoneer/setupCustomHttpHeaders',\n\t() => {\n\t\tdefaultHooks.addFilter(\n\t\t\t'payoneer.http.customHeaders',\n\t\t\t'payoneer/setupCustomHttpHeaders',\n\t\t\tfunction ( headers ) {\n\t\t\t\theaders[ LIST_LONG_ID ] = String( select( PAYONEER_STORE_KEY ).getLongId() )\n\t\t\t\treturn headers;\n\t\t\t}\n\t\t)\n\t} );\n\n/**\n * We decorate the global fetch function so that we can pass custom headers for outgoing requests.\n * This is used to control the hosted mode fallback in the back-end and for validating\n * that the frontend LIST longId matches the one used by the backend\n */\nexport const setupCustomHttpHeaders = async () => {\n\n\tconst originalFetch = window.fetch;\n\n\twindow.fetch = async ( ...args ) => {\n\t\tlet [ url, options ] = args;\n\t\t// Only process requests going out to the same origin\n\t\tif ( new URL( url, window.location.origin ).origin !== window.location.origin ) {\n\t\t\treturn originalFetch( url, options );\n\t\t}\n\t\tconst customHeaders = getCustomHeaders();\n\t\tconsole.log( 'Adding custom headers to fetch call', customHeaders );\n\t\t// Clone the original options to avoid mutating it\n\t\tif ( options && options.headers ) {\n\t\t\toptions = { ...options, headers: { ...options.headers, ...customHeaders } };\n\t\t} else {\n\t\t\toptions = { ...options, headers: customHeaders };\n\t\t}\n\n\t\treturn await originalFetch( url, options );\n\t};\n\n\tif ( !window.XMLHttpRequest ) {\n\t\treturn;\n\t}\n\n\tconst originalOpen = XMLHttpRequest.prototype.open;\n\tconst originalSend = XMLHttpRequest.prototype.send;\n\n\tXMLHttpRequest.prototype.open = function ( method, url, ...rest ) {\n\t\tthis._isSameOrigin = new URL( url, window.location.origin ).origin === window.location.origin;\n\t\toriginalOpen.apply( this, [ method, url, ...rest ] );\n\t};\n\n\tXMLHttpRequest.prototype.send = function ( ...args ) {\n\t\tconst customHeaders = getCustomHeaders();\n\n\t\tif ( this._isSameOrigin ) {\n\t\t\tconsole.log( 'Adding custom headers to XMLHttpRequest call', customHeaders );\n\t\t\tfor ( const [ header, value ] of Object.entries( customHeaders ) ) {\n\t\t\t\tthis.setRequestHeader( header, value );\n\t\t\t}\n\t\t}\n\t\toriginalSend.apply( this, args );\n\t};\n}\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wc\"][\"wcBlocksData\"];","import { dispatch } from '@wordpress/data';\nimport { PAYMENT_STORE_KEY } from '@woocommerce/block-data';\nimport { PAYONEER_STORE_KEY } from \"./index\";\nimport { select, subscribe } from '@wordpress/data';\nimport { paymentMethodName } from \"../util/woocommerce\";\n\nexport const setUpBlockCheckoutListeners = () => {\n\n\tlet currentPaymentMethod;\n\n\tconst wcPaymentStore = select( PAYMENT_STORE_KEY );\n\tconst paymentStoreCallback = () => {\n\t\tconst paymentMethod = wcPaymentStore.getActivePaymentMethod();\n\t\tif ( currentPaymentMethod !== paymentMethod ) {\n\t\t\tdispatch( PAYONEER_STORE_KEY ).setActivePaymentMethod( paymentMethod );\n\t\t\tcurrentPaymentMethod = paymentMethod;\n\t\t}\n\t}\n\tconst unsubscribePaymentStore = subscribe( paymentStoreCallback, PAYMENT_STORE_KEY );\n\tpaymentStoreCallback()\n\n\treturn { unsubscribePaymentStore };\n}\n\nexport const setupClassicCheckoutListeners = () => {\n\tconst paymentMethodCallback = function () {\n\t\tconst methodName = paymentMethodName()\n\t\tdispatch( PAYONEER_STORE_KEY ).setActivePaymentMethod( methodName );\n\t}\n\tjQuery( document.body ).on( 'payment_method_selected', paymentMethodCallback );\n\tpaymentMethodCallback()\n}\n\n\n","import { useEffect } from 'react';\nimport { getComponentNameByGatewayId } from \"../../util/components\";\n\n/**\n * @see https://developer.woocommerce.com/2022/10/06/how-the-checkout-block-processes-an-order/\n * @see https://developer.woocommerce.com/docs/cart-and-checkout-payment-method-integration-for-the-checkout-block/#3-props-fed-to-payment-method-nodes\n */\nexport const Component = function (\n\t{\n\t\tpayWithPayoneer,\n\t\tinitPayoneerComponents,\n\t\tpaymentMethodData,\n\t\trebootPayoneer,\n\t\tactivePaymentMethod,\n\t\teventRegistration,\n\t\tisValid\n\t}\n) {\n\n\tconst { onPaymentSetup, onCheckoutSuccess, onCheckoutFail } = eventRegistration;\n\t/**\n\t * Ping the SDK when we see the light of day\n\t */\n\tuseEffect( () => {\n\t\tinitPayoneerComponents()\n\t}, [] )\n\n\tuseEffect( () => {\n\t\treturn onCheckoutSuccess( () => {\n\t\t\tpayWithPayoneer()\n\t\t} );\n\t}, [] );\n\n\tuseEffect( () => {\n\t\treturn onCheckoutFail( rebootPayoneer );\n\t}, [] );\n\t/**\n\t * Enhance the payment data validation step.\n\t * We need to validate that the LIST used in block checkout submit\n\t * matches the one we will use for finalizing the transaction in the backend.\n\t * Therefore, we pass additional metadata in this listener\n\t */\n\tuseEffect( () => {\n\t\treturn onPaymentSetup( () => {\n\t\t\treturn isValid\n\t\t\t\t?\n\t\t\t\t{\n\t\t\t\t\ttype: 'success',\n\t\t\t\t}\n\t\t\t\t:\n\t\t\t\t{\n\t\t\t\t\ttype: 'failure',\n\t\t\t\t\tmessage: 'Invalid payment fields',\n\t\t\t\t}\n\t\t} );\n\t}, [ isValid, onPaymentSetup, paymentMethodData ] );\n\n\tconst componentName = getComponentNameByGatewayId( activePaymentMethod );\n\n\treturn <div\n\t\tclassName={`payment_method_${activePaymentMethod}`}\n\t\tdata-component={componentName}\n\t></div>;\n}\n","import { PAYONEER_STORE_KEY } from \"../../store\";\nimport { dispatch, withSelect } from '@wordpress/data';\n\nconst initPayoneerComponents = () => dispatch( PAYONEER_STORE_KEY ).initPayoneerComponents();\nconst payWithPayoneer = () => dispatch( PAYONEER_STORE_KEY ).pay();\nconst rebootPayoneer = () => dispatch( PAYONEER_STORE_KEY ).reboot();\n\n/**\n * Higher-Order Component that maps the inner component's props to our payoneer store\n */\nexport const provider = withSelect(\n\t( select, ownProps ) => {\n\t\tconst payoneer = select( PAYONEER_STORE_KEY )\n\t\tconst {\n\t\t\tactivePaymentMethod,\n\t\t\teventRegistration\n\t\t} = ownProps\n\t\treturn {\n\t\t\tactivePaymentMethod,\n\t\t\teventRegistration,\n\t\t\tpayWithPayoneer,\n\t\t\tinitPayoneerComponents,\n\t\t\trebootPayoneer,\n\t\t\tisValid: payoneer.getIsValid()\n\t\t}\n\t}\n)\n","import {Component} from './component'\nimport {provider} from './provider'\n\nexport const WidgetContainer = provider(Component)\n","import { setUpBlockCheckoutListeners } from \"../../store/storeListeners\";\nimport {WidgetContainer} from '../../components/widgetContainer';\nimport {select} from '@wordpress/data';\nimport { PAYONEER_STORE_KEY } from \"../../store/index\";\n\nconst payoneerStore = select( PAYONEER_STORE_KEY );\n\ndocument.addEventListener(\n\t'DOMContentLoaded',\n\t() => {\n\t\twp.hooks.addFilter(\n\t\t\t'payoneer.webSdk.onPaymentDeclined',\n\t\t\t'payoneer/blockCheckout',\n\t\t\t() => {\n\t\t\t\t/**\n\t\t\t\t * The following is an extreme solution where a correct solution seemingly does not exist.\n\t\t\t\t * As of 02/2025, the WooCommerce checkout entirely depends on a redirectUrl after onCheckoutSuccess().\n\t\t\t\t * If there is no redirect, core WC will simply do nothing, leaving a nonfunctional checkout page\n\t\t\t\t * with a greyed-out blocked Pay button.\n\t\t\t\t * You can test this by out-commenting the payment call in our 'onCheckoutSuccess' observer.\n\t\t\t\t *\n\t\t\t\t * Now:\n\t\t\t\t * Our WC backend cannot dictate a redirectUrl because we will only start the client-side CHARGE\n\t\t\t\t * after creating the order in the backend. Thus, the backend only finalizes LIST data.\n\t\t\t\t * It is the job of the WebSDK to carry out the payment and handle the redirects.\n\t\t\t\t * On the happy path, this is not an issue.\n\t\t\t\t *\n\t\t\t\t * But what if there is an error?\n\t\t\t\t * component.pay() is async, but onCheckoutSuccess() can only be influenced synchronously, by returning\n\t\t\t\t * success/failure. But we cannot know that since we are not omniscient time-bending 4D creatures yet.\n\t\t\t\t *\n\t\t\t\t * So since we cannot give WC any meaningful signal before resolving the async call,\n\t\t\t\t * we are forced to accept its default behaviour: redirecting to 'redirectUrl' which is empty,\n\t\t\t\t * leading to the aforementioned blocked checkout state.\n\t\t\t\t *\n\t\t\t\t * The only known recovery is dispatch(CHECKOUT_STORE_KEY).__internalSetIdle()\n\t\t\t\t * However, that's using an internal function that might be unsafe and could be removed any time.\n\t\t\t\t *\n\t\t\t\t * So we're picking the heavy tools when they are required. Hints and PRs welcome.\n\t\t\t\t *\n\t\t\t\t * @see https://developer.woocommerce.com/docs/cart-and-checkout-checkout-flow-and-events/\n\t\t\t\t */\n\t\t\t\twindow.location.reload();\n\t\t\t\treturn true // just out of spite\n\t\t\t}\n\t\t);\n\t},\n\tfalse\n);\n\nconst setUpGatewayContainers = function () {\n\tif ( !Array.isArray( inpsydeGateways ) ) {\n\t\tconsole.error('window.inpsydeGateways not found')\n\t\treturn;\n\t}\n\n\tinpsydeGateways.forEach( ( gatewayName ) => {\n\t\taddWidgetContainer( gatewayName );\n\t} );\n};\n\nconst addWidgetContainer = function ( gatewayId ) {\n\twp.hooks.addFilter( `${gatewayId}_checkout_fields`, gatewayId, ( components ) => {\n\t\tcomponents.push(\n\t\t\tWidgetContainer\n\t\t);\n\t\treturn components;\n\t} );\n\n\twp.hooks.addFilter(\n\t\t'payoneer-checkout_payment_method_icons',\n\t\t'payoneer-checkout',\n\t\t(icons) => {\n\t\t\tconst activePaymentMethod = payoneerStore.getActivePaymentMethod();\n\t\t\treturn activePaymentMethod === 'payoneer-checkout' ? [] : icons\n\t\t}\n\t);\n};\n\nexport const initBlockCheckout = () => {\n\tconsole.log('Loading classic checkout integration')\n\tsetUpBlockCheckoutListeners();\n\tsetUpGatewayContainers()\n}\n","import { isBlockCheckout, isPayForOrder } from './src/util/woocommerce';\nimport { setupCustomHttpHeaders } from './src/util/http';\nimport { initClassicCheckout } from \"./src/util/checkout/classicCheckout\";\nimport { initBlockCheckout } from \"./src/util/checkout/blockCheckout\";\nimport { initPaymentCheckout } from \"./src/util/checkout/paymentCheckout\";\n\n\ndocument.addEventListener(\n\t'DOMContentLoaded',\n\tsetupCustomHttpHeaders,\n\tfalse\n);\n/**\n * Boot one of the supported checkout integrations.\n * Let us hope this list is getting shorter, not longer\n */\nif ( isPayForOrder() ) {\n\tinitPaymentCheckout()\n} else if ( isBlockCheckout() ) {\n\tinitBlockCheckout();\n} else {\n\tinitClassicCheckout()\n}\n\n","import { setupClassicCheckoutListeners } from \"../../store/storeListeners\";\nimport $ from \"jquery\";\nimport {\n\tisPayForOrder,\n\tisPayoneerGatewaySelected,\n\tsubmitOrderPayViaAjax\n} from \"../woocommerce\";\nimport { PAYONEER_STORE_KEY } from \"../../store\";\nimport { defaultHooks } from '@wordpress/hooks';\nimport { select, dispatch } from '@wordpress/data';\n\n\nexport const initPaymentCheckout = () => {\n\tconsole.log('Loading payment checkout integration')\n\n\tdocument.addEventListener(\n\t\t'DOMContentLoaded',\n\t\t() => {\n\t\t\tsetupClassicCheckoutListeners()\n\n\t\t\tconst $orderReviewForm = $( '#order_review' );\n\n\t\t\tdefaultHooks.addFilter(\n\t\t\t\t'payoneer.webSdk.onSdkError',\n\t\t\t\t'payoneer/paymentCheckout',\n\t\t\t\t( isResolved, checkout, component, data ) => {\n\t\t\t\t\tconst { payOrderErrorFlag } = window.PayoneerData;\n\t\t\t\t\tconst url = new URL( document.location );\n\t\t\t\t\turl.searchParams.set( payOrderErrorFlag, true );\n\t\t\t\t\twindow.location.href = url.toString();\n\t\t\t\t\treturn isResolved;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t$orderReviewForm.on( 'submit', ( e ) => {\n\t\t\t\tif ( !isPayoneerGatewaySelected() || select( PAYONEER_STORE_KEY ).isHostedModeForced() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopImmediatePropagation();\n\n\t\t\t\tsubmitOrderPayViaAjax( $orderReviewForm )\n\t\t\t\t\t.then( () => dispatch( PAYONEER_STORE_KEY ).pay() )\n\t\t\t\t\t.catch( () => {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Reloading enables us to see error messages added via wc_add_notice()\n\t\t\t\t\t\t * Scrolling up makes sure the notices are in the viewport after the refresh\n\t\t\t\t\t\t */\n\t\t\t\t\t\twindow.scrollTo( 0, 0 );\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t} );\n\t\t\t} );\n\n\t\t\tdispatch( PAYONEER_STORE_KEY ).mountComponents();\n\t\t},\n\t\tfalse\n\t);\n}\n","import { setupClassicCheckoutListeners } from \"../../store/storeListeners\";\nimport $ from \"jquery\";\nimport {\n\tgetSelectedPaymentBox,\n\tisPayoneerGatewaySelected,\n} from \"../woocommerce\";\nimport { PAYONEER_STORE_KEY } from \"../../store\";\nimport { defaultHooks } from '@wordpress/hooks';\nimport { select, dispatch } from '@wordpress/data';\n\nexport const initClassicCheckout = () => {\n\tconsole.log('Loading classic checkout integration')\n\tdocument.addEventListener(\n\t\t'DOMContentLoaded',\n\t\t() => {\n\t\t\tsetupClassicCheckoutListeners()\n\n\t\t\tconst $checkoutForm = $( 'form.checkout' );\n\n\t\t\tdefaultHooks.addFilter(\n\t\t\t\t'payoneer.webSdk.onSdkError',\n\t\t\t\t'payoneer/shortcodeCheckout',\n\t\t\t\t( isResolved, checkout, component, data ) => {\n\t\t\t\t\twp.data.dispatch(PAYONEER_STORE_KEY).reboot();\n\n\t\t\t\t\t$( document.body ).trigger( 'update_checkout' );\n\t\t\t\t\treturn isResolved\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t/**\n\t\t\t * Cannot use native event listener for events dispatched by jQuery\n\t\t\t * https://github.com/jquery/jquery/issues/3347\n\t\t\t */\n\t\t\t$( document.body ).on( 'updated_checkout', () => dispatch( PAYONEER_STORE_KEY ).initPayoneerComponents() );\n\n\t\t\t$checkoutForm.on( 'checkout_place_order_success', ( e, result ) => {\n\t\t\t\tif ( !isPayoneerGatewaySelected() || select( PAYONEER_STORE_KEY ).isHostedModeForced() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tdispatch( PAYONEER_STORE_KEY ).pay();\n\n\t\t\t\t//Override default redirect to hosted payment page\n\t\t\t\tresult.redirect = '#payoneer-redirect';\n\n\t\t\t\t/**\n\t\t\t\t * Create a timeout that races the SDK's payment handling.\n\t\t\t\t * If the handling is not done after 1,5 second, it unblocks\n\t\t\t\t * the checkout form and scrolls the users to the payment fields\n\t\t\t\t * because probably there is an error displayed there\n\t\t\t\t *\n\t\t\t\t * This is done since the SDK does not have any validation callback\n\t\t\t\t * or Promise we could attach to.\n\t\t\t\t */\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t$checkoutForm.removeClass( 'processing' ).unblock();\n\t\t\t\t\t$.scroll_to_notices(\n\t\t\t\t\t\t$( getSelectedPaymentBox() )\n\t\t\t\t\t);\n\t\t\t\t}, 1500 );\n\n\t\t\t\treturn false;\n\t\t\t} );\n\t\t},\n\t\tfalse\n\t);\n}\n"],"names":["f","k","Symbol","for","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","exports","jsx","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","module","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","definition","o","defineProperty","enumerable","get","obj","prop","r","toStringTag","value","paymentFieldsComponentAttribute","PayoneerData","selectedPaymentGatewayId","document","querySelector","id","isPayoneerGatewaySelected","isPayoneerGateway","gatewayId","test","isPayForOrder","ACTIONS","SET_EXTENSION_DATA","SET_LONG_ID","SET_LIST_URL","SET_ENV","SET_SDK","SET_SDK_VERSION","SET_SDK_INTEGRITY","SET_SDK_STATE","ADD_COMPONENT","REMOVE_COMPONENT","MOUNT_COMPONENTS","PAY","SET_ACTIVE_PAYMENT_METHOD","SET_FORCE_HOSTED_FLOW","SET_IS_VALID","initialState","activePaymentMethod","longId","env","sdkState","forceHostedFlow","isValid","availableDropInComponents","getComponentNameByGatewayId","mountComponents","components","sdk","componentName","component","entries","container","findComponentContainer","Element","isAvailable","mount","setLongId","async","select","resolveSelect","dispatch","getSdk","updateLongId","payload","setSdkState","setEnv","addComponent","console","log","isDroppedIn","name","dropIn","hidePaymentButton","doMountComponents","error","removeComponent","initPayoneerComponents","getLongId","reboot","defaultHooks","doAction","wp","data","invalidateResolutionForStore","availableComponents","getAvailableDropInComponents","pay","getActivePaymentMethod","onBeforeError","state","includes","interaction","reason","setForceHostedFlow","applyFilters","onPaymentDeclined","onComponentListChange","changeInfo","addedComponents","forEach","removedComponents","onValidationInfo","setIsValid","valid","setActivePaymentMethod","method","flag","websdkStyles","styles","getEnv","sdkVersion","getSdkVersion","sdkIntegrity","getSdkIntegrity","config","preload","Payoneer","CheckoutWeb","Promise","resolve","reject","script","createElement","src","formatUmdUrl","scriptVersion","URL","webSdkUmdUrlTemplate","replace","onload","onerror","integrity","crossOrigin","head","appendChild","then","nonLoadingState","interval","setInterval","clearInterval","getExtensionData","response","apiFetch","path","cache","parse","payoneerExtensionData","json","extensions","extensionData","environment","PAYONEER_STORE_KEY","payoneerStore","createReduxStore","reducer","action","extension","listUrl","actions","selectors","isHostedModeForced","getIsValid","resolvers","register","FORCE_HOSTED_MODE_HEADER","IS_PAYMENT_CHECKOUT","getCustomHeaders","customHeaders","String","URLSearchParams","location","search","addAction","addFilter","headers","setupClassicCheckoutListeners","paymentMethodCallback","methodName","jQuery","body","on","payWithPayoneer","rebootPayoneer","WidgetContainer","withSelect","ownProps","payoneer","eventRegistration","provider","paymentMethodData","onPaymentSetup","onCheckoutSuccess","onCheckoutFail","useEffect","message","_jsx","className","addEventListener","hooks","reload","originalFetch","fetch","args","url","options","origin","XMLHttpRequest","originalOpen","open","originalSend","send","rest","this","_isSameOrigin","apply","header","setRequestHeader","$orderReviewForm","$","isResolved","checkout","payOrderErrorFlag","searchParams","set","href","toString","$form","preventDefault","stopImmediatePropagation","block","overlayCSS","background","opacity","wc_checkout_params","ajax_url","xhrFields","withCredentials","dataType","fields","serialize","params","always","unblock","catch","scrollTo","isBlockCheckout","setUpBlockCheckoutListeners","currentPaymentMethod","wcPaymentStore","PAYMENT_STORE_KEY","paymentStoreCallback","paymentMethod","subscribe","Array","isArray","inpsydeGateways","gatewayName","push","icons","$checkoutForm","trigger","result","redirect","setTimeout","removeClass","selector","getPaymentBox"],"sourceRoot":""}